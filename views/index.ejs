<%- include('partials/header') %>

<div class="home-page container">
    <!-- Hero section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Track your films, share your takes, go <span class="brand">CinemaNuts</span>.</h1>
            <p class="hero-subtitle">
                Rate movies with peanut scores, write reviews, and see what other CinemaNuts are watching.
            </p>

            <div class="hero-actions">
                <% if (!isAuthenticated) { %>
                    <a href="/auth/register" class="btn primary-btn">Create account</a>
                    <a href="/auth/login" class="btn secondary-btn">Sign in</a>
                <% } else { %>
                    <a href="/reviews/new" class="btn primary-btn">Write a review</a>
                    <a href="/movies" class="btn secondary-btn">Browse movies</a>
                <% } %>
            </div>
        </div>
    </section>

    <section class="featured-reviews">
        <h2>What CinemaNuts are saying</h2>

        <% if (!featuredReviews || featuredReviews.length === 0) { %>
            <p>No reviews yet. Be the first to go nuts over a movie!</p>
            <% if (isAuthenticated) { %>
                <a href="/reviews/new" class="btn primary-btn">Write a review</a>
            <% } else { %>
                <a href="/auth/register" class="btn primary-btn">Create account</a>
            <% } %>
        <% } else { %>
            <div class="review-grid">
                <% featuredReviews.forEach(review => { %>
                    <article class="review-card">
                        <h3 class="review-movie-title">
                            <a href="/movies/<%= review.movie_id %>"><%= review.movie_title %></a>
                        </h3>

                        <p class="review-rating">
                            <% for (let i = 0; i < review.rating; i++) { %>ðŸ¥œ<% } %>
                            <span class="rating-number"><%= review.rating %>/5</span>
                        </p>

                        <% if (review.comment) { %>
                            <p class="review-snippet">
                                "<%= review.comment.length > 140 ? review.comment.slice(0, 140) + 'â€¦' : review.comment %>"
                            </p>
                        <% } else { %>
                            <p class="review-snippet muted">No comment added.</p>
                        <% } %>

                        <p class="review-meta">
                            <span>by <strong><%= review.username %></strong></span>
                            <% if (helpers && helpers.formatDate) { %>
                                <span> Â· <%= helpers.formatDate(review.created_at) %></span>
                            <% } %>
                        </p>
                    </article>
                <% }) %>
            </div>
        <% } %>
    </section>
</div>

<%- include('partials/footer') %>
